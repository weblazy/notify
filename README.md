# åŠ å¯†è´§å¸ä»·æ ¼ç›‘æ§æœåŠ¡

ä¸€ä¸ªåŸºäº Go çš„åŠ å¯†è´§å¸ä»·æ ¼ç›‘æ§æœåŠ¡ï¼Œæ”¯æŒå¤šä¸ªäº¤æ˜“æ‰€æ•°æ®æºå’Œè‡ªå®šä¹‰å‘Šè­¦è§„åˆ™ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”„ å¤šæ•°æ®æºå®¹é”™ï¼š
  - å®æ—¶ä»·æ ¼ï¼šBinanceã€Bybitã€Coinbaseã€Krakenï¼ˆè‡ªåŠ¨åˆ‡æ¢ï¼‰
  - å†å²ä»·æ ¼ï¼šBinanceã€Bybit Kçº¿APIï¼ˆè‡ªåŠ¨åˆ‡æ¢ï¼‰
- ğŸ“Š åŒé‡å‘Šè­¦æœºåˆ¶ï¼š
  - ğŸ’° ä»·æ ¼å‘Šè­¦ï¼šä»·æ ¼é«˜äº/ä½äºé˜ˆå€¼æ—¶è§¦å‘
  - ğŸ“ˆ æ¶¨è·Œå¹…å‘Šè­¦ï¼šæ¶¨è·Œå¹…è¶…è¿‡æŒ‡å®šç™¾åˆ†æ¯”æ—¶è§¦å‘ï¼ˆå½“æ—¥/15åˆ†é’Ÿï¼‰
- ğŸ“± æ¨é€é€šçŸ¥ï¼šé€šè¿‡ ntfy å‘é€å‘Šè­¦æ¶ˆæ¯
- âš™ï¸ TOML é…ç½®ï¼šæ‰€æœ‰é…ç½®é¡¹å¯é€šè¿‡é…ç½®æ–‡ä»¶ç®¡ç†
- ğŸš€ åŸºäº easy æ¡†æ¶ï¼šä½¿ç”¨ github.com/weblazy/easy çš„ HTTP å®¢æˆ·ç«¯å’Œé…ç½®ç®¡ç†
- ğŸ›¡ï¸ é«˜å¯ç”¨è®¾è®¡ï¼šæ— éœ€æœ¬åœ°å­˜å‚¨ï¼Œæ‰€æœ‰æ•°æ®ä»APIå®æ—¶è·å–

## å¿«é€Ÿå¼€å§‹

### 1. ç¼–è¯‘

```bash
go build -o notify main.go
```

### 2. é…ç½®

ç¼–è¾‘ `config.toml` æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼š

```toml
# æ¨é€é€šçŸ¥é…ç½®
[Notify]
NtfyTopic = "your-topic-name"  # ä¿®æ”¹ä¸ºä½ è‡ªå·±çš„ topic
NtfyUrl = "https://ntfy.sh/your-topic-name"

# ä»·æ ¼å‘Šè­¦è§„åˆ™
[[PriceAlertRules]]
Symbol = "BTC"
Threshold = 60000.0
Comparison = "<"  # "<" (ä½äº) æˆ– ">" (é«˜äº)

# æ¶¨è·Œå¹…å‘Šè­¦è§„åˆ™
[[ChangeAlertRules]]
Symbol = "BTC"
ChangePercent = 10.0  # æ¶¨è·Œå¹…è¶…è¿‡ 10%
```

### 3. å¯åŠ¨

ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼š

```bash
./start.sh
```

æˆ–æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
export EasyConfigType=file
export EasyConfigFile=./config.toml
./notify
```

## é…ç½®è¯´æ˜

### API ç«¯ç‚¹é…ç½®

```toml
[Api]
BinanceUrl = "https://api.binance.com/api/v3/ticker/price"
BinanceKlineUrl = "https://api.binance.com/api/v3/klines"  # Kçº¿æ•°æ®ï¼ˆå†å²ä»·æ ¼ï¼‰
BybitUrl = "https://api.bybit.com/v5/market/tickers?category=spot"
BybitKlineUrl = "https://api.bybit.com/v5/market/kline"    # Kçº¿æ•°æ®ï¼ˆå†å²ä»·æ ¼ï¼‰
CoinbaseUrlTemplate = "https://api.coinbase.com/v2/prices/%s-USD/spot"
KrakenUrlTemplate = "https://api.kraken.com/0/public/Ticker?pair=%s"
```

### ç›‘æ§é…ç½®

```toml
[Monitor]
CheckIntervalSeconds = 10  # æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
AlertCooldownMinutes = 5   # å‘Šè­¦å†·å´æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰
```

### ä»·æ ¼å‘Šè­¦è§„åˆ™

å½“ä»·æ ¼è¾¾åˆ°æŒ‡å®šé˜ˆå€¼æ—¶è§¦å‘å‘Šè­¦ï¼š

```toml
[[PriceAlertRules]]
Symbol = "BTC"           # å¸ç§ç¬¦å·
Threshold = 60000.0      # é˜ˆå€¼ä»·æ ¼
Comparison = "<"         # æ¯”è¾ƒç±»å‹ï¼š"<"ï¼ˆä½äºï¼‰æˆ– ">"ï¼ˆé«˜äºï¼‰

[[PriceAlertRules]]
Symbol = "ETH"
Threshold = 2000.0
Comparison = "<"
```

### æ¶¨è·Œå¹…å‘Šè­¦è§„åˆ™

æ”¯æŒä¸¤ç§æ—¶é—´å‘¨æœŸçš„æ¶¨è·Œå¹…ç›‘æ§ï¼š

#### å½“æ—¥æ¶¨è·Œå¹…ï¼ˆdailyï¼‰
ä»å½“å¤©ç¬¬ä¸€æ¬¡è®°å½•çš„ä»·æ ¼ï¼ˆå¼€ç›˜ä»·ï¼‰å¼€å§‹è®¡ç®—æ¶¨è·Œå¹…ï¼š

```toml
[[ChangeAlertRules]]
Symbol = "BTC"           # å¸ç§ç¬¦å·
ChangePercent = 10.0     # æ¶¨è·Œå¹…é˜ˆå€¼ï¼ˆç™¾åˆ†æ¯”ï¼‰
Period = "daily"         # å½“æ—¥æ¶¨è·Œå¹…

[[ChangeAlertRules]]
Symbol = "ETH"
ChangePercent = 20.0
Period = "daily"
```

#### 15åˆ†é’Ÿæ¶¨è·Œå¹…ï¼ˆ15mï¼‰
ä»15åˆ†é’Ÿå‰çš„ä»·æ ¼å¼€å§‹è®¡ç®—æ¶¨è·Œå¹…ï¼š

```toml
[[ChangeAlertRules]]
Symbol = "BTC"           # å¸ç§ç¬¦å·
ChangePercent = 5.0      # æ¶¨è·Œå¹…é˜ˆå€¼ï¼ˆç™¾åˆ†æ¯”ï¼‰
Period = "15m"           # 15åˆ†é’Ÿæ¶¨è·Œå¹…

[[ChangeAlertRules]]
Symbol = "ETH"
ChangePercent = 10.0
Period = "15m"
```

**è¯´æ˜ï¼š**
- **å½“æ—¥æ¶¨è·Œå¹…**ï¼š
  - åŸºå‡†ä»·æ ¼ï¼šé€šè¿‡Kçº¿API è·å–å½“æ—¥å¼€ç›˜ä»·ï¼ˆ1d Kçº¿ï¼‰
  - æ— éœ€æœ¬åœ°å­˜å‚¨ï¼Œæ¯æ¬¡å®æ—¶ä»APIè·å–
  - é€‚åˆç›‘æ§å…¨å¤©è¶‹åŠ¿
- **15åˆ†é’Ÿæ¶¨è·Œå¹…**ï¼š
  - åŸºå‡†ä»·æ ¼ï¼šé€šè¿‡Kçº¿API è·å–15åˆ†é’Ÿå‰çš„ä»·æ ¼
  - ä½¿ç”¨æœ€è¿‘ä¸¤æ ¹15åˆ†é’ŸKçº¿æ•°æ®è®¡ç®—
  - é€‚åˆç›‘æ§çŸ­æœŸå‰§çƒˆæ³¢åŠ¨
- æ— è®ºä¸Šæ¶¨è¿˜æ˜¯ä¸‹è·Œï¼Œåªè¦ç»å¯¹å€¼è¶…è¿‡é˜ˆå€¼å°±ä¼šå‘Šè­¦
- æ¯ä¸ªå¸ç§+å‘¨æœŸç»„åˆæœ‰ç‹¬ç«‹çš„å†·å´æ—¶é—´
- æ—¥å¿—ä¼šåŒæ—¶æ˜¾ç¤ºå½“æ—¥æ¶¨è·Œå¹…å’Œ15åˆ†é’Ÿæ¶¨è·Œå¹…
- **ä¼˜åŠ¿**ï¼š
  - æ— éœ€æœ¬åœ°å­˜å‚¨å†å²ä»·æ ¼ï¼Œç›´æ¥ä½¿ç”¨äº¤æ˜“æ‰€æä¾›çš„Kçº¿æ•°æ®
  - **å¤šæ•°æ®æºå®¹é”™**ï¼šå†å²ä»·æ ¼è·å–æ”¯æŒè‡ªåŠ¨åˆ‡æ¢ï¼ˆBinance â†’ Bybitï¼‰ï¼Œç¡®ä¿æœåŠ¡ç¨³å®šæ€§

## ç¯å¢ƒå˜é‡

- `EasyConfigType`: é…ç½®ç±»å‹ï¼Œå¯é€‰å€¼ï¼š
  - `file`: ä»æ–‡ä»¶åŠ è½½é…ç½®
  - `local`: ä»å­—ç¬¦ä¸²åŠ è½½é…ç½®
  - `nacos`: ä» Nacos é…ç½®ä¸­å¿ƒåŠ è½½

- `EasyConfigFile`: é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå½“ `EasyConfigType=file` æ—¶ä½¿ç”¨ï¼‰

## æŠ€æœ¯æ¶æ„

### å¤šæ•°æ®æºå®¹é”™æœºåˆ¶

ç³»ç»Ÿå®ç°äº†å®Œæ•´çš„å¤šæ•°æ®æºå®¹é”™æœºåˆ¶ï¼Œç¡®ä¿æœåŠ¡é«˜å¯ç”¨ï¼š

#### å®æ—¶ä»·æ ¼è·å–
æ•°æ®æºä¼˜å…ˆçº§ï¼š**Binance â†’ Bybit â†’ Coinbase â†’ Kraken**

```
è¯·æ±‚æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Binance API â”‚ â”€â”€å¤±è´¥â”€â”€> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ Bybit API  â”‚ â”€â”€å¤±è´¥â”€â”€> ...
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å†å²ä»·æ ¼è·å–ï¼ˆKçº¿æ•°æ®ï¼‰
æ•°æ®æºä¼˜å…ˆçº§ï¼š**Binance Kçº¿ â†’ Bybit Kçº¿**

**å½“æ—¥å¼€ç›˜ä»·ï¼ˆdailyï¼‰**ï¼š
- Binance: `/api/v3/klines?symbol=BTCUSDT&interval=1d&limit=1`
- Bybit: `/v5/market/kline?category=spot&symbol=BTCUSDT&interval=D&limit=1`

**15åˆ†é’Ÿå‰ä»·æ ¼ï¼ˆ15mï¼‰**ï¼š
- Binance: `/api/v3/klines?symbol=BTCUSDT&interval=15m&limit=2`
- Bybit: `/v5/market/kline?category=spot&symbol=BTCUSDT&interval=15&limit=2`

### æ•°æ®æºæ”¯æŒçŸ©é˜µ

| æ•°æ®ç±»å‹ | Binance | Bybit | Coinbase | Kraken |
|---------|---------|-------|----------|--------|
| å®æ—¶ä»·æ ¼ | âœ… | âœ… | âœ… | âœ… |
| æ—¥Kçº¿ï¼ˆ1dï¼‰ | âœ… | âœ… | âŒ | âŒ |
| 15åˆ†é’ŸKçº¿ | âœ… | âœ… | âŒ | âŒ |

### å®¹é”™ç‰¹æ€§

âœ… **é™é»˜åˆ‡æ¢**ï¼šå½“ä¸»æ•°æ®æºå¤±è´¥æ—¶ï¼Œè‡ªåŠ¨é™é»˜åˆ‡æ¢åˆ°å¤‡ç”¨æ•°æ®æºï¼Œä¸ä¸­æ–­æœåŠ¡
âœ… **ç‹¬ç«‹å®¹é”™**ï¼šå®æ—¶ä»·æ ¼å’Œå†å²ä»·æ ¼ä½¿ç”¨ç‹¬ç«‹çš„å®¹é”™æœºåˆ¶
âœ… **é›¶é…ç½®**ï¼šç”¨æˆ·æ— éœ€å…³å¿ƒä½¿ç”¨å“ªä¸ªæ•°æ®æºï¼Œç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©å¯ç”¨æº
âœ… **é«˜å¯ç”¨æ€§**ï¼šåªè¦æœ‰ä¸€ä¸ªæ•°æ®æºå¯ç”¨ï¼ŒæœåŠ¡å°±èƒ½æ­£å¸¸è¿è¡Œ
âœ… **æ— çŠ¶æ€è®¾è®¡**ï¼šæ— éœ€æœ¬åœ°å­˜å‚¨å†å²ä»·æ ¼ï¼Œæ‰€æœ‰æ•°æ®ä»APIå®æ—¶è·å–

### æ¶¨è·Œå¹…è®¡ç®—é€»è¾‘

**å½“æ—¥æ¶¨è·Œå¹…**ï¼š
```
æ¶¨è·Œå¹… = (å½“å‰ä»·æ ¼ - å½“æ—¥å¼€ç›˜ä»·) / å½“æ—¥å¼€ç›˜ä»· Ã— 100%
```
- åŸºå‡†ä»·æ ¼ï¼šé€šè¿‡Kçº¿APIè·å–å½“æ—¥ç¬¬ä¸€æ ¹Kçº¿çš„å¼€ç›˜ä»·
- æ¯å¤©è‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€æ‰‹åŠ¨é‡ç½®

**15åˆ†é’Ÿæ¶¨è·Œå¹…**ï¼š
```
æ¶¨è·Œå¹… = (å½“å‰ä»·æ ¼ - 15åˆ†é’Ÿå‰ä»·æ ¼) / 15åˆ†é’Ÿå‰ä»·æ ¼ Ã— 100%
```
- åŸºå‡†ä»·æ ¼ï¼šé€šè¿‡Kçº¿APIè·å–15åˆ†é’Ÿå‰ä¸€æ ¹Kçº¿çš„æ”¶ç›˜ä»·
- æ¯15åˆ†é’Ÿæ»šåŠ¨æ›´æ–°

## ä¾èµ–

- [github.com/weblazy/easy](https://github.com/weblazy/easy) - HTTP å®¢æˆ·ç«¯å’Œé…ç½®ç®¡ç†
- [ntfy](https://ntfy.sh) - æ¨é€é€šçŸ¥æœåŠ¡

## è®¸å¯è¯

MIT
